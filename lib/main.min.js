"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var hasItem=function(e,t,n){if(!Array.isArray(e))throw new Error("Array was not provided.");t=t.toString();var i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;if("object"===_typeof(c)&&c.hasOwnProperty(t)&&c[t]===n)return!0}}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return!1},isHexColor=function(e){return/^#[0-9A-F]{6}$/i.test(e)},Snackbar=function(){function a(e,t){var n=this,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3200;_classCallCheck(this,a),this.name=e,this.message=t,this.duration=i,this.create(),this.hideTimeout=setTimeout(function(){n.hide()},this.duration);var r="".concat(this.name,"_hide");this._hideEvent=new CustomEvent(r)}return _createClass(a,[{key:"create",value:function(){this.container=document.createElement("div"),this.container.classList.add("snackbar");var e=document.createElement("p");return e.classList.add("snackbar-message"),e.textContent=this.message,this.container.appendChild(e),this}},{key:"setAction",value:function(e){var t=this,n=e.name,i=e.handler,r=e.dismissOnAction,a=void 0===r||r,o=e.textColor,s=document.createElement("button");return s.classList.add("snackbar-button"),s.innerText=n,isHexColor(o)&&(s.style.color=o),s.addEventListener("click",function(e){i&&i(e.target,t.container),a&&(clearTimeout(t.hideTimeout),t.hide())}),this.container.appendChild(s),this}},{key:"show",value:function(e){var t=this;e.appendChild(this.container),setTimeout(function(){t.container.classList.add("snackbar-visible")},250)}},{key:"hide",value:function(){var e=this;this.container.classList.remove("snackbar-visible"),setTimeout(function(){e.container.parentNode.removeChild(e.container)},250),this.container.dispatchEvent(this._hideEvent)}}]),a}(),OFFLINE_SNACK={name:"offline",message:"You are currently offline"},ONLINE_SNACK={name:"online",message:"You are back online"},Snackbars=function(){function i(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,i),this.container=e,this.isActive=!1,this.queue=[],n&&(window.addEventListener("offline",function(){t.queue=t.queue.filter(function(e){return e.name!==ONLINE_SNACK.name}),t.show(OFFLINE_SNACK)}),window.addEventListener("online",function(){t.queue=t.queue.filter(function(e){return e.name!==OFFLINE_SNACK.name}),t.show(ONLINE_SNACK)}))}return _createClass(i,[{key:"show",value:function(e){var t=e.name,n=e.message,i=e.action,r=e.duration,a=e.dismissOnAction,o=e.gap,s=void 0===o?500:o;if(!n||!t)throw new Error("Snackbar name or message weren't provided.");if(this.isActive){if(hasItem(this.queue,"name",t))return;this.queue.push(e)}else{var c=new Snackbar(t,n,r,a);i&&c.setAction(i),c.show(this.container),this.isActive=!0,this.queue.shift(),this.addSnackbarHideEvent(c,s)}}},{key:"addSnackbarHideEvent",value:function(e,t){var n=this;e.container.addEventListener("".concat(e.name,"_hide"),function(){n.isActive=!1,n.queue.length&&setTimeout(function(){n.show(n.queue[0])},t)})}}]),i}();module.exports=Snackbars;
