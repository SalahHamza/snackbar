"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var hasItem=function(e,t,n){if(!Array.isArray(e))throw new Error("Array was not provided.");t=t.toString();var i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;if("object"===_typeof(c)&&c.hasOwnProperty(t)&&c[t]===n)return!0}}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return!1},isHexColor=function(e){return/^#[0-9A-F]{6}$/i.test(e)},Snackbar=function(){function r(e,t,n){var i=this;_classCallCheck(this,r),this.name=e,this.message=t,this.create(),n&&(this.hideTimeout=setTimeout(function(){i.hide()},n));var a="".concat(this.name,"_hide");this._hideEvent=new CustomEvent(a)}return _createClass(r,[{key:"create",value:function(){this.container=document.createElement("div"),this.container.classList.add("snackbar");var e=document.createElement("p");return e.classList.add("snackbar-message"),e.textContent=this.message,this.container.appendChild(e),this}},{key:"setAction",value:function(e){var t=this,n=e.name,i=e.handler,a=e.dismissOnAction,r=void 0===a||a,o=e.textColor,s=this.container.querySelector(".snackbutts");s||((s=document.createElement("div")).classList.add("snackbutts"),this.container.appendChild(s));var c=document.createElement("button");return c.classList.add("snackbar-button"),c.innerText=n,isHexColor(o)&&(c.style.color=o),c.addEventListener("click",function(e){i&&i(e.target,t.container),r&&(clearTimeout(t.hideTimeout),t.hide())}),s.appendChild(c),this}},{key:"show",value:function(e){var t=this;e.appendChild(this.container),setTimeout(function(){t.container.classList.add("snackbar-visible")},250)}},{key:"hide",value:function(){var e=this;this.container.classList.remove("snackbar-visible"),setTimeout(function(){e.container.parentNode.removeChild(e.container)},250),this.container.dispatchEvent(this._hideEvent)}}]),r}(),OFFLINE_SNACK={name:"offline",message:"Unable to connect. Retrying..."},ONLINE_SNACK={name:"online",message:"You are back online",duration:3200},Snackbars=function(){function i(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,i),this.container=e,this.visibleSnackbar=null,this.queue=[],n&&(window.addEventListener("offline",function(){t.queue=t.queue.filter(function(e){return e.name!==ONLINE_SNACK.name}),t.show(OFFLINE_SNACK)}),window.addEventListener("online",function(){t.queue=t.queue.filter(function(e){return e.name!==OFFLINE_SNACK.name}),t.visibleSnackbar&&t.visibleSnackbar.name===OFFLINE_SNACK.name&&(t.visibleSnackbar.hide(),t.visibleSnackbar=null),t.show(ONLINE_SNACK)}))}return _createClass(i,[{key:"show",value:function(e){var t=e.name,n=e.message,i=e.actions,a=void 0===i?[]:i,r=e.duration,o=e.gap,s=void 0===o?500:o;if(!n||!t)throw new Error("Snackbar name or message weren't provided.");if(this.visibleSnackbar){if(hasItem(this.queue,"name",t))return;this.queue.push(e)}else{var c=new Snackbar(t,n,r),u=!0,l=!1,h=void 0;try{for(var d,f=a[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var v=d.value;c.setAction(v)}}catch(e){l=!0,h=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw h}}r||a.length||c.setAction({name:"dismiss"}),c.show(this.container),this.visibleSnackbar=c,this.queue.shift(),this.addSnackbarHideEvent(c,s)}}},{key:"addSnackbarHideEvent",value:function(e,t){var n=this;e.container.addEventListener("".concat(e.name,"_hide"),function(){n.visibleSnackbar=null,n.queue.length&&setTimeout(function(){n.show(n.queue[0])},t)})}}]),i}();module.exports=Snackbars;
